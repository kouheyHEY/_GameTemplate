# 変更履歴記録ガイド (History Recording Guide)

このガイドでは、プロジェクトの変更履歴を `docs/history` に記録する方法を説明します。

## 記録対象

以下のレベルの変更・修正を記録してください:

- **要件定義レベル**: ゲームの仕様変更、新機能の追加決定、既存機能の削除決定など
- **設計レベル**: アーキテクチャの変更、新しいデザインパターンの導入、モジュール構成の変更など
- **大きな実装レベル**: 複数ファイルにまたがる大規模なリファクタリング、コアシステムの実装・変更など

> [!NOTE]
> 小さなバグ修正や微調整は記録不要です。プロジェクトの方向性や構造に影響を与える変更のみを記録してください。

## ファイル命名規則

履歴ファイルは以下の形式で命名してください:

```
YYYY-MM-DD_変更内容の簡潔な説明.md
```

**例:**

- `2026-02-13_コアプリロードシステム導入.md`
- `2026-02-10_ステートマシン設計変更.md`
- `2026-01-25_チュートリアルシステム実装.md`

## 記録テンプレート

以下のテンプレートを使用して履歴を記録してください:

```markdown
# [変更内容のタイトル]

**日付**: YYYY-MM-DD  
**カテゴリ**: [要件定義 / 設計 / 実装]  
**影響範囲**: [影響を受けるモジュール・ファイル]

## 変更の背景

なぜこの変更が必要だったのか、どのような問題を解決するのかを記述します。

## 変更内容

具体的に何を変更したのかを記述します。

### 主な変更点

- 変更点1
- 変更点2
- 変更点3

### 影響を受けるファイル

- `src/path/to/file1.ts`
- `src/path/to/file2.ts`

## 設計判断

なぜこのアプローチを選んだのか、他の選択肢と比較してどうだったのかを記述します。

## 今後の課題・注意点

この変更によって生じた新たな課題や、今後注意すべき点があれば記述します。

## 参考資料

- 関連するドキュメントやリンク
- 参考にした記事やライブラリ
```

## 記録例

実際の記録例を示します:

### 例1: コアプリロードシステム導入

```markdown
# コアプリロードシステムの導入

**日付**: 2026-02-13  
**カテゴリ**: 設計・実装  
**影響範囲**: `src/core/scenes/CorePreloadScene.ts`, `src/game/scenes/PreloadScene.ts`

## 変更の背景

複数のゲームプロジェクトで共通のアセット読み込み処理とローディングバーUIを使い回すため、
再利用可能なコアプリロードシステムを導入しました。

## 変更内容

### 主な変更点

- `CorePreloadScene` を新規作成し、汎用的なローディングバーとアセット読み込み構造を実装
- `PreloadScene` を `CorePreloadScene` を継承する形に変更
- ローディングバーのスタイルを定数化し、カスタマイズ可能に

### 影響を受けるファイル

- `src/core/scenes/CorePreloadScene.ts` (新規)
- `src/game/scenes/PreloadScene.ts` (変更)

## 設計判断

テンプレート継承パターンを採用し、`CorePreloadScene` で共通処理を実装、
各ゲームの `PreloadScene` で `loadAssets()` をオーバーライドする形にしました。
これにより、コアの変更が各プロジェクトに自動的に反映されます。

## 今後の課題・注意点

- ローディングバーのデザインをさらにカスタマイズしたい場合、定数の拡張が必要
- 複雑なアセット管理（遅延読み込みなど）には対応していない
```

## 記録のタイミング

以下のタイミングで履歴を記録してください:

1. **大きな変更の完了時**: 実装が完了し、動作確認が取れた時点
2. **設計判断の直後**: 重要な設計判断を行った直後（実装前でも可）
3. **リリース前**: バージョンリリース前に、そのバージョンでの主要な変更をまとめて記録

## ベストプラクティス

- **簡潔に**: 長すぎる説明は避け、要点を押さえた記述を心がけてください
- **具体的に**: 抽象的な説明ではなく、具体的なファイル名やクラス名を含めてください
- **理由を明確に**: 「何を」だけでなく「なぜ」を必ず記述してください
- **将来の自分へ**: 3ヶ月後の自分が読んでも理解できる内容を目指してください

## 関連ドキュメント

- [README.md](../../README.md) - プロジェクト概要
- [ADVANCED_GUIDE.md](./ADVANCED_GUIDE.md) - 上級者向けガイド
